å½“ç„¶ï¼è¿™æ®µ C++ ä»£ç æ˜¯æŸä¸ª**æŠ•ç¥¨ç³»ç»Ÿ**çš„æ ¸å¿ƒé€»è¾‘ï¼Œç›®çš„æ˜¯ï¼š

* è®°å½•å·²ç»æŠ•ç¥¨çš„äººçš„åå­—ï¼ˆé˜²æ­¢é‡å¤æŠ•ç¥¨ï¼‰
* ç»Ÿè®¡é‡å¤æŠ•ç¥¨æ¬¡æ•°
* æœ€ç»ˆæ‰“å°æŠ•ç¥¨æƒ…å†µï¼ˆæ€»äººæ•°ã€é‡å¤æ¬¡æ•°ã€åå•ï¼‰

ä¸‹é¢æˆ‘ä¼šé€è¡Œè®²è§£æ¯ä¸€éƒ¨åˆ†çš„ä½œç”¨ï¼Œä¾¿äºä½ åœ¨è¯¾å ‚ä¸Šæˆ–é¡¹ç›®ç­”è¾©ä¸­è®²æ¸…æ¥šé€»è¾‘ã€‚

---

## ğŸ”— å¼•ç”¨çš„å¤´æ–‡ä»¶

```cpp
#include "vote.h"         // å¤´æ–‡ä»¶ï¼Œå®šä¹‰å‡½æ•°æ¥å£ï¼ˆå‡è®¾ vote.cpp æ˜¯å®ç°ï¼‰
#include "hash.h"         // åŒ…å«è‡ªå®šä¹‰å“ˆå¸Œå‡½æ•° custom_hash çš„å£°æ˜
#include <unordered_set>  // ç”¨äº votedï¼šè®°å½•å·²æŠ•ç¥¨çš„å“ˆå¸Œå€¼
#include <unordered_map>  // ç”¨äº hash_to_nameï¼šæ˜ å°„å“ˆå¸Œåˆ°åå­—
#include <fstream>        // ç”¨äºä»æ–‡ä»¶è¯»å–åå•
#include <iostream>       // ç”¨äºè¾“å‡ºç»Ÿè®¡ä¿¡æ¯
```

---

## ğŸ” é™æ€å…¨å±€å˜é‡ï¼ˆä»… vote.cpp ä¸­å¯è§ï¼‰

```cpp
static std::unordered_set<size_t> voted;
static std::unordered_map<size_t, std::string> hash_to_name;
static int duplicates = 0;
```

### è§£é‡Šï¼š

* `voted`ï¼šå­˜æ”¾æ‰€æœ‰å·²æŠ•ç¥¨äººçš„å“ˆå¸Œå€¼ï¼ˆç”¨æ¥å¿«é€ŸæŸ¥é‡ï¼‰
* `hash_to_name`ï¼šå°†å“ˆå¸Œå€¼æ˜ å°„åˆ°æŠ•ç¥¨è€…çš„åŸå§‹å§“æ°ï¼ˆç”¨äºæœ€åè¾“å‡ºï¼‰
* `duplicates`ï¼šç»Ÿè®¡é‡å¤æŠ•ç¥¨çš„æ¬¡æ•°

> æ³¨æ„ï¼šè¿™é‡Œé€šè¿‡å“ˆå¸Œé¿å…ç›´æ¥ä¿å­˜å§“åæœ¬èº«ï¼Œæé«˜æ•ˆç‡å’Œå®‰å…¨æ€§ï¼ˆé˜²æ­¢éšç§æ³„éœ²æˆ–ç›´æ¥æ¯”å¯¹é€ æˆå†²çªï¼‰

---

## ğŸ“‚ `enrolled` å‡½æ•°ï¼šä»æ–‡ä»¶è¯»å–åˆå§‹åå•

```cpp
void enrolled(const std::string& filepath) {
    std::ifstream in(filepath);
    std::string name;
    while (getline(in, name)) {
        size_t h = custom_hash(name);
        if (voted.count(h) == 0) {
            voted.insert(h);
            hash_to_name[h] = name;
        } else {
            ++duplicates;
        }
    }
}
```

### è§£é‡Šï¼š

* æ‰“å¼€æ–‡ä»¶ `filepath`ï¼Œé€è¡Œè¯»å–æ¯ä¸ªåå­—
* å¯¹æ¯ä¸ªåå­—è¿›è¡Œå“ˆå¸Œè®¡ç®—ï¼Œå¾—åˆ° `h`
* å¦‚æœè¿™ä¸ªå“ˆå¸Œå€¼è¿˜æ²¡å‡ºç°åœ¨æŠ•ç¥¨è¡¨ä¸­ï¼Œå°±æ·»åŠ è¿›å»
* å¦åˆ™ï¼Œè¯´æ˜è¿™ä¸ªäººå·²ç»â€œæŠ•ç¥¨è¿‡â€ï¼Œè®¡å…¥é‡å¤æ•°

---

## ğŸ‘¤ `unenrolled` å‡½æ•°ï¼šæ·»åŠ ä¸€ä¸ªæ‰‹åŠ¨æŠ•ç¥¨è€…ï¼ˆéåå•ï¼‰

```cpp
void unenrolled(const std::string& surname) {
    size_t h = custom_hash(surname);
    if (voted.count(h) == 0) {
        voted.insert(h);
        hash_to_name[h] = surname;
    } else {
        ++duplicates;
    }
}
```

### è§£é‡Šï¼š

* æ¥æ”¶ä¸€ä¸ªå•ä¸ªå§“æ° `surname`
* åŒæ ·å“ˆå¸Œååˆ¤æ–­æ˜¯å¦é‡å¤ï¼Œå¦‚æœæ²¡æœ‰åˆ™æ·»åŠ 
* å¦‚æœé‡å¤åˆ™ä¹Ÿè®¡å…¥ `duplicates`

---

## ğŸ“Š `print_results` å‡½æ•°ï¼šè¾“å‡ºæœ€ç»ˆç»Ÿè®¡ç»“æœ

```cpp
void print_results() {
    std::cout << "ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ³Ğ¾Ğ»Ğ¾ÑÑƒÑÑ‰Ğ¸Ñ…: " << voted.size() << "\n";
    std::cout << "ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ´ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ‚Ğ¾Ğ²: " << duplicates << "\n";
    std::cout << "Ğ¤Ğ°Ğ¼Ğ¸Ğ»Ğ¸Ğ¸ Ğ³Ğ¾Ğ»Ğ¾ÑÑƒÑÑ‰Ğ¸Ñ…:\n";
    for (const auto& [h, name] : hash_to_name) {
        std::cout << "- " << name << "\n";
    }
}
```

### è§£é‡Šï¼š

* è¾“å‡ºæ€»å…±æŠ•ç¥¨äººæ•°ï¼ˆå³å»é‡åçš„ï¼‰
* è¾“å‡ºé‡å¤æŠ•ç¥¨æ¬¡æ•°
* è¾“å‡ºæ‰€æœ‰æˆåŠŸæŠ•ç¥¨è€…çš„å§“æ°åˆ—è¡¨

---

## âœ… æ€»ç»“åŠŸèƒ½

| åŠŸèƒ½                 | è¯´æ˜                   |
| ------------------ | -------------------- |
| ğŸ“¥ `enrolled`      | æ‰¹é‡å¯¼å…¥åå•ï¼ˆå¦‚ä»æ–‡ä»¶ï¼‰         |
| â• `unenrolled`     | æ·»åŠ æœªç™»è®°æŠ•ç¥¨äºº             |
| ğŸ” å»é‡æœºåˆ¶            | ä½¿ç”¨è‡ªå®šä¹‰å“ˆå¸Œé¿å…é‡å¤æŠ•ç¥¨        |
| ğŸ“ˆ `print_results` | è¾“å‡ºç»Ÿè®¡ä¿¡æ¯ï¼šæ€»äººæ•°ã€é‡å¤æ¬¡æ•°ã€å§“ååˆ—è¡¨ |

---

å¦‚æœä½ è¿˜éœ€è¦æˆ‘è§£é‡Š `custom_hash` çš„ä½œç”¨ã€è¿™ä¸ªç³»ç»Ÿå¦‚ä½•æµ‹è¯•ï¼Œæˆ–è¦ç”¨ä¿„è¯­ä»‹ç»å®ƒçš„å®ç°ï¼Œæˆ‘ä¹Ÿå¯ä»¥å¸®ä½ ç»§ç»­æ‰©å±•ã€‚æ˜¯å¦è¿˜éœ€è¦ `hash.h` å’Œ `vote.h` çš„å†…å®¹ä¸€èµ·è®²è§£ï¼Ÿ
